{"/home/usuario/ull-esit-inf-dsi-21-22-prct11-async-sockets-alu0101119137/src/ejercicio/client.ts":{"path":"/home/usuario/ull-esit-inf-dsi-21-22-prct11-async-sockets-alu0101119137/src/ejercicio/client.ts","statementMap":{"0":{"start":{"line":7,"column":22},"end":{"line":17,"column":3}},"1":{"start":{"line":8,"column":4},"end":{"line":8,"column":33}},"2":{"start":{"line":8,"column":26},"end":{"line":8,"column":33}},"3":{"start":{"line":9,"column":15},"end":{"line":9,"column":52}},"4":{"start":{"line":10,"column":4},"end":{"line":12,"column":5}},"5":{"start":{"line":11,"column":6},"end":{"line":11,"column":68}},"6":{"start":{"line":11,"column":51},"end":{"line":11,"column":63}},"7":{"start":{"line":13,"column":4},"end":{"line":13,"column":39}},"8":{"start":{"line":15,"column":4},"end":{"line":15,"column":33}},"9":{"start":{"line":15,"column":26},"end":{"line":15,"column":33}},"10":{"start":{"line":16,"column":4},"end":{"line":16,"column":17}},"11":{"start":{"line":18,"column":25},"end":{"line":22,"column":2}},"12":{"start":{"line":19,"column":4},"end":{"line":19,"column":72}},"13":{"start":{"line":21,"column":4},"end":{"line":21,"column":21}},"14":{"start":{"line":23,"column":19},"end":{"line":29,"column":1}},"15":{"start":{"line":24,"column":4},"end":{"line":24,"column":42}},"16":{"start":{"line":24,"column":31},"end":{"line":24,"column":42}},"17":{"start":{"line":25,"column":17},"end":{"line":25,"column":19}},"18":{"start":{"line":26,"column":4},"end":{"line":26,"column":141}},"19":{"start":{"line":26,"column":21},"end":{"line":26,"column":141}},"20":{"start":{"line":26,"column":40},"end":{"line":26,"column":141}},"21":{"start":{"line":26,"column":109},"end":{"line":26,"column":141}},"22":{"start":{"line":27,"column":4},"end":{"line":27,"column":36}},"23":{"start":{"line":28,"column":4},"end":{"line":28,"column":18}},"24":{"start":{"line":30,"column":0},"end":{"line":30,"column":62}},"25":{"start":{"line":31,"column":0},"end":{"line":31,"column":25}},"26":{"start":{"line":32,"column":12},"end":{"line":32,"column":40}},"27":{"start":{"line":33,"column":14},"end":{"line":33,"column":44}},"28":{"start":{"line":39,"column":8},"end":{"line":39,"column":37}},"29":{"start":{"line":42,"column":23},"end":{"line":42,"column":51}},"30":{"start":{"line":43,"column":8},"end":{"line":43,"column":54}},"31":{"start":{"line":44,"column":8},"end":{"line":44,"column":21}},"32":{"start":{"line":45,"column":25},"end":{"line":45,"column":27}},"33":{"start":{"line":46,"column":8},"end":{"line":48,"column":11}},"34":{"start":{"line":47,"column":12},"end":{"line":47,"column":32}},"35":{"start":{"line":49,"column":8},"end":{"line":51,"column":11}},"36":{"start":{"line":50,"column":12},"end":{"line":50,"column":22}},"37":{"start":{"line":52,"column":8},"end":{"line":90,"column":11}},"38":{"start":{"line":53,"column":32},"end":{"line":53,"column":54}},"39":{"start":{"line":54,"column":12},"end":{"line":88,"column":13}},"40":{"start":{"line":56,"column":20},"end":{"line":61,"column":21}},"41":{"start":{"line":57,"column":24},"end":{"line":57,"column":96}},"42":{"start":{"line":60,"column":24},"end":{"line":60,"column":99}},"43":{"start":{"line":62,"column":20},"end":{"line":62,"column":26}},"44":{"start":{"line":64,"column":20},"end":{"line":69,"column":21}},"45":{"start":{"line":65,"column":24},"end":{"line":65,"column":99}},"46":{"start":{"line":68,"column":24},"end":{"line":68,"column":99}},"47":{"start":{"line":70,"column":20},"end":{"line":70,"column":26}},"48":{"start":{"line":87,"column":20},"end":{"line":87,"column":26}},"49":{"start":{"line":93,"column":0},"end":{"line":93,"column":26}}},"fnMap":{"0":{"name":"(anonymous_0)","decl":{"start":{"line":7,"column":74},"end":{"line":7,"column":75}},"loc":{"start":{"line":7,"column":96},"end":{"line":14,"column":1}},"line":7},"1":{"name":"(anonymous_1)","decl":{"start":{"line":11,"column":38},"end":{"line":11,"column":39}},"loc":{"start":{"line":11,"column":49},"end":{"line":11,"column":65}},"line":11},"2":{"name":"(anonymous_2)","decl":{"start":{"line":14,"column":6},"end":{"line":14,"column":7}},"loc":{"start":{"line":14,"column":28},"end":{"line":17,"column":1}},"line":14},"3":{"name":"(anonymous_3)","decl":{"start":{"line":18,"column":80},"end":{"line":18,"column":81}},"loc":{"start":{"line":18,"column":95},"end":{"line":20,"column":1}},"line":18},"4":{"name":"(anonymous_4)","decl":{"start":{"line":20,"column":5},"end":{"line":20,"column":6}},"loc":{"start":{"line":20,"column":20},"end":{"line":22,"column":1}},"line":20},"5":{"name":"(anonymous_5)","decl":{"start":{"line":23,"column":50},"end":{"line":23,"column":51}},"loc":{"start":{"line":23,"column":65},"end":{"line":29,"column":1}},"line":23},"6":{"name":"(anonymous_6)","decl":{"start":{"line":38,"column":4},"end":{"line":38,"column":5}},"loc":{"start":{"line":38,"column":28},"end":{"line":40,"column":5}},"line":38},"7":{"name":"(anonymous_7)","decl":{"start":{"line":41,"column":4},"end":{"line":41,"column":5}},"loc":{"start":{"line":41,"column":15},"end":{"line":91,"column":5}},"line":41},"8":{"name":"(anonymous_8)","decl":{"start":{"line":46,"column":26},"end":{"line":46,"column":27}},"loc":{"start":{"line":46,"column":37},"end":{"line":48,"column":9}},"line":46},"9":{"name":"(anonymous_9)","decl":{"start":{"line":49,"column":27},"end":{"line":49,"column":28}},"loc":{"start":{"line":49,"column":36},"end":{"line":51,"column":9}},"line":49},"10":{"name":"(anonymous_10)","decl":{"start":{"line":52,"column":29},"end":{"line":52,"column":30}},"loc":{"start":{"line":52,"column":35},"end":{"line":90,"column":9}},"line":52}},"branchMap":{"0":{"loc":{"start":{"line":7,"column":22},"end":{"line":17,"column":3}},"type":"binary-expr","locations":[{"start":{"line":7,"column":23},"end":{"line":7,"column":27}},{"start":{"line":7,"column":31},"end":{"line":7,"column":51}},{"start":{"line":7,"column":57},"end":{"line":17,"column":2}}],"line":7},"1":{"loc":{"start":{"line":7,"column":57},"end":{"line":17,"column":2}},"type":"cond-expr","locations":[{"start":{"line":7,"column":74},"end":{"line":14,"column":1}},{"start":{"line":14,"column":6},"end":{"line":17,"column":1}}],"line":7},"2":{"loc":{"start":{"line":8,"column":4},"end":{"line":8,"column":33}},"type":"if","locations":[{"start":{"line":8,"column":4},"end":{"line":8,"column":33}},{"start":{"line":8,"column":4},"end":{"line":8,"column":33}}],"line":8},"3":{"loc":{"start":{"line":10,"column":4},"end":{"line":12,"column":5}},"type":"if","locations":[{"start":{"line":10,"column":4},"end":{"line":12,"column":5}},{"start":{"line":10,"column":4},"end":{"line":12,"column":5}}],"line":10},"4":{"loc":{"start":{"line":10,"column":8},"end":{"line":10,"column":85}},"type":"binary-expr","locations":[{"start":{"line":10,"column":8},"end":{"line":10,"column":13}},{"start":{"line":10,"column":18},"end":{"line":10,"column":84}}],"line":10},"5":{"loc":{"start":{"line":10,"column":18},"end":{"line":10,"column":84}},"type":"cond-expr","locations":[{"start":{"line":10,"column":34},"end":{"line":10,"column":47}},{"start":{"line":10,"column":50},"end":{"line":10,"column":84}}],"line":10},"6":{"loc":{"start":{"line":10,"column":50},"end":{"line":10,"column":84}},"type":"binary-expr","locations":[{"start":{"line":10,"column":50},"end":{"line":10,"column":63}},{"start":{"line":10,"column":67},"end":{"line":10,"column":84}}],"line":10},"7":{"loc":{"start":{"line":15,"column":4},"end":{"line":15,"column":33}},"type":"if","locations":[{"start":{"line":15,"column":4},"end":{"line":15,"column":33}},{"start":{"line":15,"column":4},"end":{"line":15,"column":33}}],"line":15},"8":{"loc":{"start":{"line":18,"column":25},"end":{"line":22,"column":2}},"type":"binary-expr","locations":[{"start":{"line":18,"column":26},"end":{"line":18,"column":30}},{"start":{"line":18,"column":34},"end":{"line":18,"column":57}},{"start":{"line":18,"column":63},"end":{"line":22,"column":1}}],"line":18},"9":{"loc":{"start":{"line":18,"column":63},"end":{"line":22,"column":1}},"type":"cond-expr","locations":[{"start":{"line":18,"column":80},"end":{"line":20,"column":1}},{"start":{"line":20,"column":5},"end":{"line":22,"column":1}}],"line":18},"10":{"loc":{"start":{"line":23,"column":19},"end":{"line":29,"column":1}},"type":"binary-expr","locations":[{"start":{"line":23,"column":20},"end":{"line":23,"column":24}},{"start":{"line":23,"column":28},"end":{"line":23,"column":45}},{"start":{"line":23,"column":50},"end":{"line":29,"column":1}}],"line":23},"11":{"loc":{"start":{"line":24,"column":4},"end":{"line":24,"column":42}},"type":"if","locations":[{"start":{"line":24,"column":4},"end":{"line":24,"column":42}},{"start":{"line":24,"column":4},"end":{"line":24,"column":42}}],"line":24},"12":{"loc":{"start":{"line":24,"column":8},"end":{"line":24,"column":29}},"type":"binary-expr","locations":[{"start":{"line":24,"column":8},"end":{"line":24,"column":11}},{"start":{"line":24,"column":15},"end":{"line":24,"column":29}}],"line":24},"13":{"loc":{"start":{"line":26,"column":4},"end":{"line":26,"column":141}},"type":"if","locations":[{"start":{"line":26,"column":4},"end":{"line":26,"column":141}},{"start":{"line":26,"column":4},"end":{"line":26,"column":141}}],"line":26},"14":{"loc":{"start":{"line":26,"column":40},"end":{"line":26,"column":141}},"type":"if","locations":[{"start":{"line":26,"column":40},"end":{"line":26,"column":141}},{"start":{"line":26,"column":40},"end":{"line":26,"column":141}}],"line":26},"15":{"loc":{"start":{"line":26,"column":44},"end":{"line":26,"column":107}},"type":"binary-expr","locations":[{"start":{"line":26,"column":44},"end":{"line":26,"column":59}},{"start":{"line":26,"column":63},"end":{"line":26,"column":107}}],"line":26},"16":{"loc":{"start":{"line":54,"column":12},"end":{"line":88,"column":13}},"type":"switch","locations":[{"start":{"line":55,"column":16},"end":{"line":62,"column":26}},{"start":{"line":63,"column":16},"end":{"line":70,"column":26}},{"start":{"line":86,"column":16},"end":{"line":87,"column":26}}],"line":54},"17":{"loc":{"start":{"line":56,"column":20},"end":{"line":61,"column":21}},"type":"if","locations":[{"start":{"line":56,"column":20},"end":{"line":61,"column":21}},{"start":{"line":56,"column":20},"end":{"line":61,"column":21}}],"line":56},"18":{"loc":{"start":{"line":64,"column":20},"end":{"line":69,"column":21}},"type":"if","locations":[{"start":{"line":64,"column":20},"end":{"line":69,"column":21}},{"start":{"line":64,"column":20},"end":{"line":69,"column":21}}],"line":64}},"s":{"0":1,"1":18,"2":18,"3":18,"4":18,"5":18,"6":1,"7":18,"8":0,"9":0,"10":0,"11":1,"12":2,"13":0,"14":1,"15":2,"16":0,"17":2,"18":2,"19":2,"20":20,"21":18,"22":2,"23":2,"24":1,"25":1,"26":1,"27":1,"28":1,"29":1,"30":1,"31":1,"32":1,"33":1,"34":1,"35":1,"36":0,"37":1,"38":0,"39":0,"40":0,"41":0,"42":0,"43":0,"44":0,"45":0,"46":0,"47":0,"48":0,"49":1},"f":{"0":18,"1":1,"2":0,"3":2,"4":0,"5":2,"6":1,"7":1,"8":1,"9":0,"10":0},"b":{"0":[1,1,1],"1":[1,0],"2":[18,0],"3":[18,0],"4":[18,18],"5":[2,16],"6":[16,0],"7":[0,0],"8":[1,1,1],"9":[1,0],"10":[1,1,1],"11":[0,2],"12":[2,2],"13":[2,0],"14":[18,2],"15":[20,20],"16":[0,0,0],"17":[0,0],"18":[0,0]},"inputSourceMap":{"version":3,"file":"/home/usuario/ull-esit-inf-dsi-21-22-prct11-async-sockets-alu0101119137/src/ejercicio/client.ts","sources":["/home/usuario/ull-esit-inf-dsi-21-22-prct11-async-sockets-alu0101119137/src/ejercicio/client.ts"],"names":[],"mappings":";AAAA;;;;GAIG;;;;;;;;;;;;;;;;;;;;;;;;;;AAEH,yCAA2B;AAC3B,6CAA+B;AAc/B;;GAEG;AACH,MAAa,OAAO;IAClB,YAAoB,UAAuB;QAAvB,eAAU,GAAV,UAAU,CAAa;IAAG,CAAC;IAE/C,QAAQ;QACN,MAAM,MAAM,GAAG,GAAG,CAAC,OAAO,CAAC,EAAC,IAAI,EAAE,KAAK,EAAC,CAAC,CAAC;QAC1C,MAAM,CAAC,KAAK,CAAC,IAAI,CAAC,SAAS,CAAC,IAAI,CAAC,UAAU,CAAC,CAAC,CAAC;QAC9C,MAAM,CAAC,GAAG,EAAE,CAAC;QAEb,IAAI,UAAU,GAAG,EAAE,CAAC;QACpB,MAAM,CAAC,EAAE,CAAC,MAAM,EAAE,CAAC,KAAK,EAAE,EAAE;YAC1B,UAAU,IAAI,KAAK,CAAC;QACtB,CAAC,CAAC,CAAC;QAEH,MAAM,CAAC,EAAE,CAAC,OAAO,EAAE,CAAC,GAAG,EAAE,EAAE;YACzB,MAAM,GAAG,CAAC;QACZ,CAAC,CAAC,CAAC;QAEH,MAAM,CAAC,EAAE,CAAC,SAAS,EAAE,GAAG,EAAE;YACxB,MAAM,WAAW,GAAG,IAAI,CAAC,KAAK,CAAC,UAAU,CAAC,CAAC;YAE3C,QAAQ,WAAW,CAAC,IAAI,EAAE;gBACxB,KAAK,KAAK;oBACR,IAAI,WAAW,CAAC,OAAO,EAAE;wBACvB,OAAO,CAAC,GAAG,CAAC,KAAK,CAAC,OAAO,CAAC,KAAK,CAAC,qCAAqC,CAAC,CAAC,CAAC;qBACzE;yBAAM;wBACL,OAAO,CAAC,GAAG,CAAC,KAAK,CAAC,OAAO,CAAC,GAAG,CAAC,0CAA0C,CAAC,CAAC,CAAC;qBAC5E;oBACD,MAAM;gBAER,KAAK,QAAQ;oBACX,IAAI,WAAW,CAAC,OAAO,EAAE;wBACvB,OAAO,CAAC,GAAG,CAAC,KAAK,CAAC,OAAO,CAAC,KAAK,CAAC,wCAAwC,CAAC,CAAC,CAAC;qBAC5E;yBAAM;wBACL,OAAO,CAAC,GAAG,CAAC,KAAK,CAAC,OAAO,CAAC,GAAG,CAAC,0CAA0C,CAAC,CAAC,CAAC;qBAC5E;oBACD,MAAM;gBAER,iBAAiB;gBACjB,+BAA+B;gBAC/B,iFAAiF;gBACjF,aAAa;gBACb,kFAAkF;gBAClF,MAAM;gBACN,WAAW;gBACX,eAAe;gBACf,+BAA+B;gBAC/B,2DAA2D;gBAC3D,qCAAqC;gBACrC,aAAa;gBACb,6FAA6F;gBAC7F,MAAM;gBACN,WAAW;gBACX;oBACE,MAAM;aACT;YACD,uCAAuC;QACzC,CAAC,CAAC,CAAC;IACL,CAAC;CACF;AA1DD,0BA0DC;AAED,+CAA+C;AAC/C,uBAAuB","sourcesContent":["/**\n * Práctica 10. Cliente procesamiento de notas\n * @module Cliente\n * @author Andrea Hernández Martín\n */\n\nimport * as net from 'net';\nimport * as chalk from \"chalk\";\n\n/**\n * Tipo de datos de una petición\n * @type\n */\nexport type RequestType = {\n  type: 'add' | 'update' | 'remove' | 'read' | 'list';\n  user: string;\n  title?: string;\n  body?: string;\n  color?: string;\n}\n\n/**\n * Clase cliente\n */\nexport class Cliente {\n  constructor(private miPeticion: RequestType) {}\n\n  conexion() {\n    const client = net.connect({port: 60300});\n    client.write(JSON.stringify(this.miPeticion));\n    client.end();\n\n    let myResponse = '';\n    client.on('data', (trozo) => {\n      myResponse += trozo;\n    });\n\n    client.on('error', (err) => {\n      throw err;\n    });\n\n    client.on('request', () => {\n      const miRespuesta = JSON.parse(myResponse);\n\n      switch (miRespuesta.type) {\n        case 'add':\n          if (miRespuesta.success) {\n            console.log(chalk.default.green('Se ha añadido la nota correctamente'));\n          } else {\n            console.log(chalk.default.red('Error. Ya existe una nota con ese nombre'));\n          }\n          break;\n\n        case 'update':\n          if (miRespuesta.success) {\n            console.log(chalk.default.green('Se ha modificado la nota correctamente'));\n          } else {\n            console.log(chalk.default.red('Error. No existe una nota con ese nombre'));\n          }\n          break;\n\n        // case 'remove':\n        //   if (miRespuesta.success) {\n        //     console.log(chalk.default.green('Se ha eliminado la nota correctamente'));\n        //   } else {\n        //     console.log(chalk.default.red('Error. No existe una nota con ese nombre'));\n        //   }\n        //   break;\n        // case 'list':\n        //   if (miRespuesta.success) {\n        //     console.log(chalk.default.green('Lista de notas:'));\n        //     console.log(miRespuesta.list);\n        //   } else {\n        //     console.log(chalk.default.red('Error. No existen notas que mostrar para el usuario'));\n        //   }\n        //   break;\n        default:\n          break;\n      }\n      // console.log(JSON.parse(myResponse));\n    });\n  }\n}\n\n// const myClient = new Cliente({type: 'add'});\n// myClient.conexion();\n"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"8b6d75aea0f59a5d4419edd347abb6c3b7a746e7","contentHash":"9497a48a8916a7910c145804e4c41124b7a91a84d03cdb108faa798418e28720"}}